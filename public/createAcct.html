<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome</title>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="./css/reset.css">
    <link rel="stylesheet" type="text/css" href="./css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.min.css">

    <!-- JS -->
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
</head>

<body>
    <section class="hero is-light is-large" id="banner">
        <div class="hero-body" id="logInForm">
            <div class="box">
                <article class="media">
                    <div class="media-content">
                        <div class="container has-text-centered">
                            <strong id="loginTxt">Create Account</strong>
                        </div>
                        <h1>Username</h1>
                        <div class="field">
                            <p class="control has-icons-left has-icons-right">
                                <input id='username' class="input" type="username" placeholder="Enter your Username">
                                <span class="icon is-small is-left">
                                    <i class="fas fa-user"></i>
                                </span>
                            </p>
                        </div>
                        <h1>Password</h1>
                        <div class="field">
                            <p class="control has-icons-left">
                                <input id="password" class="input" type="password" placeholder="Enter Your Password">
                                <span class="icon is-small is-left">
                                    <i class="fas fa-lock"></i>
                                </span>
                            </p>
                        </div>
                        <h1>Verify Password</h1>
                        <div class="field">
                            <p class="control has-icons-left">
                                <input id="passwordCheck" class="input" type="password" placeholder="Enter Your Password">
                                <span class="icon is-small is-left">
                                    <i class="fas fa-lock"></i>
                                </span>
                            </p>
                        </div>
                        <a id="createAcctLoginBtn" class="button">Create</a>
                            </div>
                        </nav>
                    </div>
                </article>
            </div>
        </div>
    </section>

    <footer id="sticky">
        Copyright @ Orange-red-Project-2 2019
    </footer>

    <script type="text/javascript">
    $('#createAcctLoginBtn').on('click', function(event){
      console.log("working");
      event.preventDefault();

      if($('#password').val() === $('#passwordCheck').val()){
        //passwords match -- continue with post request
        const newAccount = {
          username: $('#username').val().trim(),
          password: $('#password').val().trim()
        }

        $.post('/api/newAccounts', newAccount)
        .then(function(data) {
          alert('Your account has been created!')
          // later auto login new user

          window.location.href = '/';

        })

      } else{
        alert('Your password did not match, please try again');
      }




    }); //end needAcctBtn on click
    </script>


</body>

</html>
